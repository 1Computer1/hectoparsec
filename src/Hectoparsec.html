<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module      : Hectoparsec
Copyright   : (c) comp 2020
License     : MIT
Maintainer  : onecomputer00@gmail.com
Stability   : stable
Portability : portable

Top-level module for Hectoparsec. These parsers are smart in keeping track of labels for parsers, which can be used
to generate informational error messages. They also keep track of source positions, which can be attached to results.

To get started, define a parser type for your specific usecase. A parser works over a certain input stream and can
use a custom error type or label type. Custom input streams can be used by implementing the 'Stream' typeclass.

@
import Control.Applicative
import Data.Text (Text)
import Data.Void (Void)
import Hectoparsec

-- Parser over a text stream, with no custom errors, and with string parser labels.
type P = 'Parser' Text Void String

data Color = Red | Green | Blue

red, green, blue :: P Color

red   = Red   \&lt;$ 'string' \&quot;red\&quot;   '&lt;?&gt;' \&quot;red\&quot;
green = Green \&lt;$ 'string' \&quot;green\&quot; '&lt;?&gt;' \&quot;green\&quot;
blue  = Blue  \&lt;$ 'string' \&quot;blue\&quot;  '&lt;?&gt;' \&quot;blue\&quot;

color :: P Color
color = red \&lt;|&gt; green \&lt;|&gt; blue

parseColor :: FilePath -&gt; Text -&gt; Either ('ParseError' Text Void String) Color
parseColor fp s = 'evalParser' (color &lt;* 'endOfInput') fp s
@
-}</span><span>
</span><span id="line-39"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hectoparsec</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Re-exports</span></span><span>
</span><span id="line-41"></span><span>      </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hectoparsec.Error.html"><span class="hs-identifier">Hectoparsec.Error</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hectoparsec.Pos.html"><span class="hs-identifier">Hectoparsec.Pos</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hectoparsec.Stream.html"><span class="hs-identifier">Hectoparsec.Stream</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hectoparsec.State.html"><span class="hs-identifier">Hectoparsec.State</span></a></span><span>
</span><span id="line-45"></span><span>      </span><span class="annot"><span class="hs-comment">-- * ParserT monad transformer</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#ParserT"><span class="hs-identifier">ParserT</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.html#evalParserT"><span class="hs-identifier">evalParserT</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.html#runParserT"><span class="hs-identifier">runParserT</span></a></span><span>
</span><span id="line-49"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Parser monad</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#Parser"><span class="hs-identifier">Parser</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.html#evalParser"><span class="hs-identifier">evalParser</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.html#runParser"><span class="hs-identifier">runParser</span></a></span><span>
</span><span id="line-53"></span><span>      </span><span class="annot"><span class="hs-comment">-- * MonadParser typeclass</span></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#MonadParser"><span class="hs-identifier">MonadParser</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** Derived combinators</span></span><span>
</span><span id="line-56"></span><span>      </span><span class="annot"><span class="hs-comment">-- *** Input consumption</span></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#anyToken"><span class="hs-identifier">anyToken</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#char"><span class="hs-identifier">char</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#string"><span class="hs-identifier">string</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#satisfy"><span class="hs-identifier">satisfy</span></a></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#peek"><span class="hs-identifier">peek</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#peekNext"><span class="hs-identifier">peekNext</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#countTokens"><span class="hs-identifier">countTokens</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#tokenWhile"><span class="hs-identifier">tokenWhile</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#tokenWhile1"><span class="hs-identifier">tokenWhile1</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#matchRest"><span class="hs-identifier">matchRest</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#atEnd"><span class="hs-identifier">atEnd</span></a></span><span>
</span><span id="line-68"></span><span>      </span><span class="annot"><span class="hs-comment">-- *** Label combinators</span></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#label"><span class="hs-keyword">label</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#%3C%3F%3E"><span class="hs-operator">(&lt;?&gt;)</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#hidden"><span class="hs-identifier">hidden</span></a></span><span>
</span><span id="line-72"></span><span>      </span><span class="annot"><span class="hs-comment">-- *** Error combinators</span></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#restore"><span class="hs-identifier">restore</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#unexpected"><span class="hs-identifier">unexpected</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#failure"><span class="hs-identifier">failure</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#customError"><span class="hs-identifier">customError</span></a></span><span>
</span><span id="line-77"></span><span>      </span><span class="annot"><span class="hs-comment">-- *** State combinators</span></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#getsState"><span class="hs-identifier">getsState</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#modifyState"><span class="hs-identifier">modifyState</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#getInput"><span class="hs-identifier">getInput</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#getsInput"><span class="hs-identifier">getsInput</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#putInput"><span class="hs-identifier">putInput</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#modifyInput"><span class="hs-identifier">modifyInput</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#getPos"><span class="hs-identifier">getPos</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html#getOffset"><span class="hs-identifier">getOffset</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.Class.html"><span class="hs-identifier">Hectoparsec.Class</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.Error.html"><span class="hs-identifier">Hectoparsec.Error</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.Pos.html"><span class="hs-identifier">Hectoparsec.Pos</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html"><span class="hs-identifier">Hectoparsec.Primitive</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.State.html"><span class="hs-identifier">Hectoparsec.State</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hectoparsec.Stream.html"><span class="hs-identifier">Hectoparsec.Stream</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- | Runs a parser given an input stream and the file name. Returns either the parse error or the result.</span><span>
</span><span id="line-97"></span><span id="local-6989586621679061008"><span id="local-6989586621679061009"><span id="local-6989586621679061010"><span id="local-6989586621679061011"><span id="local-6989586621679061012"><span class="annot"><a href="Hectoparsec.html#evalParserT"><span class="hs-identifier hs-type">evalParserT</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061012"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#ParserT"><span class="hs-identifier hs-type">ParserT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061011"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061010"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061009"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061012"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061008"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679061011"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679061012"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.Error.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061011"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061010"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061009"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679061008"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-103"></span><span id="evalParserT"><span class="annot"><span class="annottext">evalParserT :: forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a
-&gt; FilePath -&gt; s -&gt; m (Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#evalParserT"><span class="hs-identifier hs-var hs-var">evalParserT</span></a></span></span><span> </span><span id="local-6989586621679060911"><span class="annot"><span class="annottext">ParserT s e l m a
</span><a href="#local-6989586621679060911"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679060910"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679060910"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679060909"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679060909"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((State s, Either (ParseError s e l) a)
 -&gt; Either (ParseError s e l) a)
-&gt; m (State s, Either (ParseError s e l) a)
-&gt; m (Either (ParseError s e l) a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(State s, Either (ParseError s e l) a)
-&gt; Either (ParseError s e l) a
forall a b. (a, b) -&gt; b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(m (State s, Either (ParseError s e l) a)
 -&gt; m (Either (ParseError s e l) a))
-&gt; m (State s, Either (ParseError s e l) a)
-&gt; m (Either (ParseError s e l) a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ParserT s e l m a
-&gt; State s -&gt; m (State s, Either (ParseError s e l) a)
forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a
-&gt; State s -&gt; m (State s, Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#runParserT"><span class="hs-identifier hs-var">runParserT</span></a></span><span> </span><span class="annot"><span class="annottext">ParserT s e l m a
</span><a href="#local-6989586621679060911"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; s -&gt; State s
forall s. FilePath -&gt; s -&gt; State s
</span><a href="Hectoparsec.State.html#initialState"><span class="hs-identifier hs-var">initialState</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679060910"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679060909"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | A variant of 'evalParserT' that takes in an initial state and also gives the final state.</span><span>
</span><span id="line-106"></span><span id="local-6989586621679060984"><span id="local-6989586621679060985"><span id="local-6989586621679060986"><span id="local-6989586621679060987"><span id="local-6989586621679060988"><span class="annot"><a href="Hectoparsec.html#runParserT"><span class="hs-identifier hs-type">runParserT</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060988"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#ParserT"><span class="hs-identifier hs-type">ParserT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060987"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060986"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060985"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060988"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060984"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hectoparsec.State.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060987"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679060988"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.State.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060987"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.Error.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060987"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060986"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060985"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679060984"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-111"></span><span id="runParserT"><span class="annot"><span class="annottext">runParserT :: forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a
-&gt; State s -&gt; m (State s, Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#runParserT"><span class="hs-identifier hs-var hs-var">runParserT</span></a></span></span><span> </span><span id="local-6989586621679060903"><span class="annot"><span class="annottext">ParserT s e l m a
</span><a href="#local-6989586621679060903"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679060902"><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060902"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Hectoparsec.Primitive.html#Reply"><span class="hs-identifier hs-type">Reply</span></a></span><span> </span><span id="local-6989586621679060900"><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060900"><span class="hs-identifier hs-var">st'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679060899"><span class="annot"><span class="annottext">Either (ParseError s e l) a
</span><a href="#local-6989586621679060899"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParserT s e l m a -&gt; State s -&gt; m (Reply s e l a)
forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a -&gt; State s -&gt; m (Reply s e l a)
</span><a href="Hectoparsec.Primitive.html#contParserT"><span class="hs-identifier hs-var">contParserT</span></a></span><span> </span><span class="annot"><span class="annottext">ParserT s e l m a
</span><a href="#local-6989586621679060903"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060902"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">(State s, Either (ParseError s e l) a)
-&gt; m (State s, Either (ParseError s e l) a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">((State s, Either (ParseError s e l) a)
 -&gt; m (State s, Either (ParseError s e l) a))
-&gt; (State s, Either (ParseError s e l) a)
-&gt; m (State s, Either (ParseError s e l) a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (ParseError s e l) a
</span><a href="#local-6989586621679060899"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679060897"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679060897"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060900"><span class="hs-identifier hs-var">st'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either (ParseError s e l) a
forall a b. b -&gt; Either a b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679060897"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679060896"><span class="annot"><span class="annottext">ParseError s e l
</span><a href="#local-6989586621679060896"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060900"><span class="hs-identifier hs-var">st'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParseError s e l -&gt; Either (ParseError s e l) a
forall a b. a -&gt; Either a b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">ParseError s e l
</span><a href="#local-6989586621679060896"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- | Runs a parser given an input stream and the file name. Returns either the parse error or the result.</span><span>
</span><span id="line-118"></span><span id="local-6989586621679060965"><span id="local-6989586621679060966"><span id="local-6989586621679060967"><span id="local-6989586621679060968"><span class="annot"><a href="Hectoparsec.html#evalParser"><span class="hs-identifier hs-type">evalParser</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060968"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060967"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060966"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060965"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679060968"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.Error.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060968"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060967"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060966"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679060965"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-123"></span><span id="evalParser"><span class="annot"><span class="annottext">evalParser :: forall s e l a.
Parser s e l a -&gt; FilePath -&gt; s -&gt; Either (ParseError s e l) a
</span><a href="Hectoparsec.html#evalParser"><span class="hs-identifier hs-var hs-var">evalParser</span></a></span></span><span> </span><span id="local-6989586621679060893"><span class="annot"><span class="annottext">Parser s e l a
</span><a href="#local-6989586621679060893"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679060892"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679060892"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679060891"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679060891"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity (Either (ParseError s e l) a)
-&gt; Either (ParseError s e l) a
forall a. Identity a -&gt; a
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">runIdentity</span></a></span><span> </span><span class="annot"><span class="annottext">(Identity (Either (ParseError s e l) a)
 -&gt; Either (ParseError s e l) a)
-&gt; Identity (Either (ParseError s e l) a)
-&gt; Either (ParseError s e l) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Parser s e l a
-&gt; FilePath -&gt; s -&gt; Identity (Either (ParseError s e l) a)
forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a
-&gt; FilePath -&gt; s -&gt; m (Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#evalParserT"><span class="hs-identifier hs-var">evalParserT</span></a></span><span> </span><span class="annot"><span class="annottext">Parser s e l a
</span><a href="#local-6989586621679060893"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679060892"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679060891"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- | A variant of 'evalParser' that takes in an initial state and also gives the final state.</span><span>
</span><span id="line-126"></span><span id="local-6989586621679060954"><span id="local-6989586621679060955"><span id="local-6989586621679060956"><span id="local-6989586621679060957"><span class="annot"><a href="Hectoparsec.html#runParser"><span class="hs-identifier hs-type">runParser</span></a></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hectoparsec.Primitive.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060956"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060955"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060954"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hectoparsec.State.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060957"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.State.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060957"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hectoparsec.Error.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060956"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060955"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679060954"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-130"></span><span id="runParser"><span class="annot"><span class="annottext">runParser :: forall s e l a.
Parser s e l a -&gt; State s -&gt; (State s, Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#runParser"><span class="hs-identifier hs-var hs-var">runParser</span></a></span></span><span> </span><span id="local-6989586621679060888"><span class="annot"><span class="annottext">Parser s e l a
</span><a href="#local-6989586621679060888"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679060887"><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060887"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity (State s, Either (ParseError s e l) a)
-&gt; (State s, Either (ParseError s e l) a)
forall a. Identity a -&gt; a
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-identifier hs-var">runIdentity</span></a></span><span> </span><span class="annot"><span class="annottext">(Identity (State s, Either (ParseError s e l) a)
 -&gt; (State s, Either (ParseError s e l) a))
-&gt; Identity (State s, Either (ParseError s e l) a)
-&gt; (State s, Either (ParseError s e l) a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/kp/.ghcup/ghc/9.2.1/share/doc/ghc-9.2.1/html/libraries/base-4.16.0.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Parser s e l a
-&gt; State s -&gt; Identity (State s, Either (ParseError s e l) a)
forall (m :: * -&gt; *) s e l a.
Monad m =&gt;
ParserT s e l m a
-&gt; State s -&gt; m (State s, Either (ParseError s e l) a)
</span><a href="Hectoparsec.html#runParserT"><span class="hs-identifier hs-var">runParserT</span></a></span><span> </span><span class="annot"><span class="annottext">Parser s e l a
</span><a href="#local-6989586621679060888"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">State s
</span><a href="#local-6989586621679060887"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-131"></span></pre></body></html>